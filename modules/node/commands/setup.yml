- name: Run task dependencies
  include_tasks: "{{ playbook_dir }}/lib/dependencies/{{ item }}.yml"
  loop:
    - os_is_mac
    - homebrew_is_installed

- block:
    - name: Ensure pnpm is installed and up to date
      homebrew:
        name: pnpm
        state: upgraded
      when: homebrew_is_installed

    - name: Set Node.js env variables
      script: "{{ playbook_dir }}/modules/node/scripts/set_node_env_vars"

  when:
    - os_is_mac

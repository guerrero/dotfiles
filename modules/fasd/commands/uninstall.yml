---
- name: Run task dependencies for uninstall duti
  include_tasks: "{{ playbook_dir }}/lib/dependencies/{{ item }}.yml"
  loop:
    - os_is_mac
    - homebrew_is_installed

- block:
    - name: Ensure absence of duti binary
      homebrew:
        name: whjvenyl-fasd # Forked up-to-date version of fasd
        state: absent
        install_options: force

    - name: Ensure absence of variable for fasd cache path
      script: "{{ playbook_dir }}/modules/fasd/scripts/remove_fasd_cache_folder"

    - name: Remove personal tap
      homebrew_tap:
        name: guerrero/tap
        state: absent
        
  when:
    - os_is_mac
    - homebrew_is_installed
